<div class="register-wrapper" id="main-wrapper">
  <div class="position-relative overflow-hidden min-vh-100 w-100 d-flex align-items-center justify-content-center">
    <div class="d-flex align-items-center justify-content-center w-100">
      <div class="row justify-content-center w-100">
        <div class="col-md-8 col-lg-6 col-xxl-4">
          <div class="card mb-0">
            <div class="card-body">
              <!-- Logo -->
              <div class="text-center mb-4">
                <img src="./assets/images/logos/logo.svg" width="180" alt="Logo AvançaPJ" />
              </div>

              <!-- Título -->
              <div class="text-center mb-4">
                <h2 class="mb-2 fs-7 fw-bolder">Criar Nova Conta</h2>
                <p class="mb-0">Preencha os dados abaixo para se cadastrar</p>
              </div>

              <!-- Formulário -->
              <form [formGroup]="form" (ngSubmit)="submit()">
                <div class="row">
                  <!-- Nome -->
                  <div class="col-md-6 mb-3">
                    <mat-form-field class="w-100" appearance="outline">
                      <mat-label>Nome</mat-label>
                      <input 
                        matInput 
                        formControlName="firstName" 
                        placeholder="Seu nome"
                        required
                      />
                      <mat-icon matPrefix>person</mat-icon>
                      <mat-error *ngIf="f['firstName'].hasError('required')">
                        Nome é obrigatório
                      </mat-error>
                      <mat-error *ngIf="f['firstName'].hasError('minlength')">
                        Nome deve ter pelo menos 2 caracteres
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <!-- Sobrenome -->
                  <div class="col-md-6 mb-3">
                    <mat-form-field class="w-100" appearance="outline">
                      <mat-label>Sobrenome</mat-label>
                      <input 
                        matInput 
                        formControlName="lastName" 
                        placeholder="Seu sobrenome"
                        required
                      />
                      <mat-icon matPrefix>person</mat-icon>
                      <mat-error *ngIf="f['lastName'].hasError('required')">
                        Sobrenome é obrigatório
                      </mat-error>
                      <mat-error *ngIf="f['lastName'].hasError('minlength')">
                        Sobrenome deve ter pelo menos 2 caracteres
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>

                <!-- Email -->
                <mat-form-field class="w-100 mb-3" appearance="outline">
                  <mat-label>Email</mat-label>
                  <input 
                    matInput 
                    type="email" 
                    formControlName="email" 
                    placeholder="seu@email.com"
                    required
                  />
                  <mat-icon matPrefix>email</mat-icon>
                  <mat-error *ngIf="f['email'].hasError('required')">
                    Email é obrigatório
                  </mat-error>
                  <mat-error *ngIf="f['email'].hasError('email')">
                    Email inválido
                  </mat-error>
                </mat-form-field>

                <!-- Senha -->
                <mat-form-field class="w-100 mb-3" appearance="outline">
                  <mat-label>Senha</mat-label>
                  <input 
                    matInput 
                    [type]="hidePassword ? 'password' : 'text'" 
                    formControlName="password"
                    placeholder="Mínimo 6 caracteres"
                    required
                  />
                  <mat-icon matPrefix>lock</mat-icon>
                  <button 
                    mat-icon-button 
                    matSuffix 
                    type="button"
                    (click)="hidePassword = !hidePassword"
                    [attr.aria-label]="'Hide password'"
                  >
                    <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                  </button>
                  <mat-error *ngIf="f['password'].hasError('required')">
                    Senha é obrigatória
                  </mat-error>
                  <mat-error *ngIf="f['password'].hasError('minlength')">
                    Senha deve ter pelo menos 6 caracteres
                  </mat-error>
                </mat-form-field>

                <!-- Confirmar Senha -->
                <mat-form-field class="w-100 mb-4" appearance="outline">
                  <mat-label>Confirmar Senha</mat-label>
                  <input 
                    matInput 
                    [type]="hideConfirmPassword ? 'password' : 'text'" 
                    formControlName="confirmPassword"
                    placeholder="Digite a senha novamente"
                    required
                  />
                  <mat-icon matPrefix>lock</mat-icon>
                  <button 
                    mat-icon-button 
                    matSuffix 
                    type="button"
                    (click)="hideConfirmPassword = !hideConfirmPassword"
                    [attr.aria-label]="'Hide password'"
                  >
                    <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                  </button>
                  <mat-error *ngIf="f['confirmPassword'].hasError('required')">
                    Confirmação de senha é obrigatória
                  </mat-error>
                  <mat-error *ngIf="!passwordsMatch && !f['confirmPassword'].hasError('required')">
                    As senhas não coincidem
                  </mat-error>
                </mat-form-field>

                <!-- Botão de Cadastro -->
                <button 
                  mat-raised-button 
                  color="primary" 
                  class="w-100 mb-3"
                  type="submit"
                  [disabled]="loading || form.invalid"
                >
                  <span *ngIf="!loading">Criar Conta</span>
                  <span *ngIf="loading">
                    <mat-spinner diameter="20" class="d-inline-block"></mat-spinner>
                    Criando conta...
                  </span>
                </button>

                <!-- Link para Login -->
                <div class="text-center">
                  <span class="text-muted">Já tem uma conta? </span>
                  <a 
                    [routerLink]="['/authentication/login']" 
                    class="text-primary fw-medium"
                  >
                    Fazer Login
                  </a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
