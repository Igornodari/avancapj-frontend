<mat-card class="cardWithShadow">
	<mat-card-content>
		<form [formGroup]="formGroup">
			<div class="row m-t-2">
				<div class="col-sm-4">
					<mat-label class="mat-subtitle-2 f-w-600 d-block"> {{ 'EMAIL' | translate }}</mat-label>
					<mat-form-field appearance="outline" class="w-100" color="primary">
						<input matInput type="text" placeholder="example@example.com.br" formControlName="email" />
					</mat-form-field>
				</div>
				<div class="col-sm-4">
					<mat-label class="mat-subtitle-2 f-w-600 d-block">{{ 'NAME' | translate }}</mat-label>
					<mat-form-field appearance="outline" class="w-100" color="primary">
						<input matInput type="text" formControlName="fullName" />
					</mat-form-field>
				</div>
				<div class="col">
					<mat-label class="mat-subtitle-2 f-w-600 d-block m-t-10"></mat-label>
					<mat-checkbox color="primary" class="m-t-20" formControlName="match">{{
						'HOME.USERS.LEADS.FILTER.MATCH_RESPONSE' | translate
						}}</mat-checkbox>
				</div>
			</div>
		</form>
		<div class="main-container m-t-2">
			@if (loading) {
			<app-loading></app-loading>
			}

			<div class="table-responsive">
				<table mat-table [dataSource]="dataSource" class="main-table" matSort matSortActive="createdAt"
					matSortDisableClear matSortDirection="desc">
					<ng-container matColumnDef="name">
						<th mat-header-cell *matHeaderCellDef>{{ 'NAME' | translate }}</th>
						<td mat-cell *matCellDef="let row">
							{{ row['fullName'] | titlecase }}
						</td>
					</ng-container>
					<ng-container matColumnDef="email">
						<th mat-header-cell *matHeaderCellDef>{{ 'EMAIL' | translate }}</th>
						<td mat-cell *matCellDef="let row">
							{{ row.email }}
						</td>
					</ng-container>
					<ng-container matColumnDef="fone">
						<th mat-header-cell *matHeaderCellDef>{{ 'PHONE' | translate }}</th>
						<td mat-cell *matCellDef="let row">
							{{ row.cellphone }}
						</td>
					</ng-container>
					<ng-container matColumnDef="owner">
						<th mat-header-cell *matHeaderCellDef>{{ 'PROPERTY' | translate }}</th>
						<td mat-cell *matCellDef="let row">
							{{ row.admin?.name }}
						</td>
					</ng-container>
					<ng-container matColumnDef="status">
						<th mat-header-cell *matHeaderCellDef>{{ 'STATUS' | translate }}</th>
						<td mat-cell *matCellDef="let row">
							{{ row.zohoStatus }}
						</td>
					</ng-container>

					<ng-container matColumnDef="scoreIcon">
						<th mat-header-cell *matHeaderCellDef>
							{{ 'HOME.USERS.LEADS.TABLE.HEADER.TEMP' | translate }}
						</th>
						<td mat-cell *matCellDef="let row">
							<span class="d-flex justify-content-center score-icons">{{
								getScoreIcon(row.score)
								}}</span>
						</td>
					</ng-container>
					<ng-container matColumnDef="visibilityIcon">
						<th mat-header-cell *matHeaderCellDef>{{ 'ACTIONS' | translate }}</th>
						<td id="visibility-icon" mat-cell *matCellDef="let row">
							<button mat-icon-button color="primary" [routerLink]="['/users/leads', row._id]"
								aria-label="visibility icon">
								<mat-icon>visibility</mat-icon>
							</button>
						</td>
					</ng-container>

					<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
					<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
				</table>
				@if (!dataSource.data.length) {
				<div class="rate-limit-reached">
					{{ 'NO_RESULTS' | translate }}
				</div>
				}
			</div>

			<mat-paginator [length]="resultsLength" [pageSize]="10" [pageSizeOptions]="pageSizeOptions"></mat-paginator>
		</div>
	</mat-card-content>
</mat-card>